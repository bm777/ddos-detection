# This Python file uses the following encoding: utf-8
import sys, os, time
from PySide2.QtWidgets import QApplication, QWidget
from PySide2.QtGui import *
from PySide2.QtWidgets import *
from PySide2.QtCore import *
from PySide2.QtQml import *
from PySide2 import QtNetwork
import threading
from PySide2 import QtOpenGL

class Manager(QObject):

    d = Signal(list)

    tmp = []

    @Slot()
    def process(self):
        counter = 1
        while True:

            try:
                tmp = [
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],

                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],

                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],

                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],

                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Abnormal", "Discard"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],

                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Abnormal", "Discard"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "2", "192.168.8.2", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "6", "192.168.8.3", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "5", "192.168.8.5", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                        ["27/11/20", "4", "192.168.8.1", "2252", "192.168.8.10", "80", "Normal", "Allowed"],
                    ]

                time.sleep(1)
                if counter <= len(tmp):
                    self.d.emit(list(tmp[:counter]))
                    counter += 1
                else:
                    counter = 0

            except Exception as e:
                print(e)

class Data(QObject):
    d = Signal(list)

    def __init__(self, parent=None):
        super(Data, self).__init__(parent)
        self._d = []

    def getD(self):
        return self._d

    def setD(self, tmp):
        if self._d != tmp:
            self._d = tmp
            self.d.emit(list(tmp))

    data = Property("QVariantList", fget=getD, fset=setD, notify=d)


if __name__ == "__main__":
    app = QApplication(sys.argv)

    manager = Data()
    engine = QQmlApplicationEngine()
    engine.rootContext().setContextProperty("bridge", manager)
    url = QUrl.fromLocalFile(os.path.join(os.path.dirname(__file__), "qml/system.qml"))
    engine.load(url)


    if not engine.rootObjects():
        sys.exit(-1)

    worker = Manager()
    threading.Thread(target=worker.process, daemon=True).start()
    worker.d.connect(manager.setD)

    app.exec_()
